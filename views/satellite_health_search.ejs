<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Monitoring</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="w-[100vw] fons-sans bg-black" >
    <div class="flex items-center justify-between">
    <h1 class="p-5 text-white font-bold">Health Monitoring</h1>
    <input type="text" onkeydown="handleKeyDown(event)" placeholder="search satellite" class="text-black pl-2 rounded-[5px]" id="searchField" />
    </div>

    <div class="mx-5 mt-5 w-[96vw] pb-10">
        <table id="dataTable w-[100%]">
            <thead class="w-[100%]  text-white text-[13px] border">
                <tr class="w-[100%]">
                    <th class="border-r w-[20%] p-2">Sat Id</th>
                    <th class="border-r w-[20%] p-2">Sat Name</th>
                    <th class="border-r w-[20%] p-2">Launched Date</th>
                    <th class="border-r w-[20%] p-2">Orbit</th>
                    <th class="border-r w-[20%] p-2">Status</th>
                    <th class="border-r w-[20%] p-2">Sensor Info</th>
                    <th class="border-r w-[20%] p-2">Warning Info</th>
                    <th class="w-[10%] p-2">Timestamp</th>
                </tr>
            </thead> 
             <tbody id="dataBody" class="w-[100%] text-white text-[13px] border">
                <% response.forEach( function (r) { %>
                <tr class="w-[100%]">
                    <th class="border-r w-[20%] p-2"><%= r.info.satid %></th>
                    <th class="border-r w-[20%] p-2"><%= r.info.satname %></th>
                    <th class="border-r w-[20%] p-2"><%= r.info.launch_date %></th>
                    <th class="border-r w-[20%] p-2"><%= r.info.orbit_type %></th>
                    <th class="border-r w-[20%] p-2"><%= r.info.status %></th>
                    <th class="border-r w-[20%] p-2"><%= JSON.stringify(r.sensor_info) %></th>
                    <th class="border-r w-[20%] p-2"><%= JSON.stringify(r.warn_info) %></th>
                    <th class="w-[10%] p-2"><%= r.createdAt %></th>
                </tr>
                <% }) %>
             </tbody>
        </table>

    </div>

    
        <script>
            function handleKeyDown(event) {
                if (event.keyCode === 13) {
                // Execute your JavaScript function here
                searchData();
                }
            }
            async function searchData(){
                console.log("clicked")
                var search = document.getElementById('searchField').value;
                window.location.href = "/satellites_health_search/" + search
            }
          

    </script>  
</body>
</html>